=render 'shared/navbar'
.col-xs-12
  #manage-ideas(ng-controller='backofficeCtrl' ng-init="init('#{@application.id}')")
    %div.ideas-navigate
      %a(href='#' ng-click='showAll()' ng-class='{ active: activeClass == "all" }' ) All
      %a(href='#' ng-click='showCompleted()' ng-class='{ active: activeClass == "completed"}') Completed
      %a(href='#' ng-click='hideCompleted()' ng-class='{ active: activeClass == "hide_completed" }') Not completed
      %a(href='#' ng-click='showVisible()' ng-class='{ active: activeClass == "visible" }') Visible
      %a(href='#' ng-click='hideVisible()' ng-class='{ active: activeClass == "hide_visible" }') Hidden
    %ul
      %li.idea(ng-repeat='idea in ideas | filter:selectedFilter' ng-class='{ "completed": idea.completed}')
        %h1
          {{ idea.title }}
        %p
          {{ idea.description }}
        .meta
          .icon.upvote
          %span.upvotes
            {{ idea.upvotes }}
          %span.dot •
          .icon.downvote
          %span.downvotes
            {{ idea.downvotes }}
          %span.dot •
          .icon.comment
          %span.comment
            {{ idea.comments_count }} comments
          %span.dot •
          by
          %span.user
            %span
              {{ idea.creator_name }}
          on
          %span.time
            {{ idea.updated_at }}
        .not-visible-overlay(ng-if='!idea.visible')
        .options
          .icon(ng-class='{ visible: idea.visible, "not-visible": !idea.visible }' ng-click='toggleVisible(idea)')
          .icon.edit
          .icon.delete
          .icon.edit
        .comments
          %ul
            %li.comment-item(ng-repeat='comment in idea.comments')
              .avatar
                %img(ng-src='{{comment.gravatar_url}}')
              .content
                .meta
                  %span.username
                    {{ comment.creator_name }}
                  %span on
                  %span
                    {{ comment.updated_at }}
                .comment-body
                  {{ comment.body }}
