$(function(){

    if (SBTools.isPresent('.applications.show')){
        $('.icon').each(function(index){
            if (index === 0){setSelected(this);}
            $(this).on('click', function(e){
                setSelected(e.target);
            });
        });

        function setSelected(item){
            $('.icon').removeClass('selected');
            $(item).addClass('selected');
            setIconKey(item);
        };

        function setIconKey(item){
            var textArea = $('textarea');
            var text = textArea.html();
            text = text.replace(/icon = ".*"/,"icon = \"" + $(item).data('title') + "\"");
            textArea.empty().append(text);
        };
    }
});
